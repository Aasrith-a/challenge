<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Aasritha Solutions ATS Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- React and Babel -->
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <style>
    /* === AMOLED + Glassmorphism Theme === */
    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 0;
      background: linear-gradient(135deg, #0d0d0d, #1a1a1a);
      color: #fff;
    }

    header {
      background: linear-gradient(135deg, #3b82f6, #9333ea);
      text-align: center;
      padding: 25px;
      font-size: 1.8rem;
      font-weight: bold;
      letter-spacing: 1px;
      box-shadow: 0 4px 30px rgba(0, 0, 0, 0.4);
    }

    .container {
      max-width: 1000px;
      margin: 30px auto;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 20px;
      padding: 30px;
      backdrop-filter: blur(15px);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
    }

    .upload-section {
      text-align: center;
      margin-bottom: 20px;
    }

    .upload-input {
      background: rgba(255, 255, 255, 0.1);
      padding: 10px;
      border-radius: 10px;
      cursor: pointer;
      color: #fff;
      margin-top: 10px;
    }

    .filters {
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
      margin-bottom: 20px;
    }

    .filters select, input[type="text"] {
      padding: 10px;
      border-radius: 10px;
      border: none;
      outline: none;
      background: rgba(255, 255, 255, 0.1);
      color: white;
      margin: 5px;
      flex: 1;
    }

    .export-btn {
      background: linear-gradient(135deg, #06b6d4, #3b82f6);
      border: none;
      padding: 10px 15px;
      border-radius: 10px;
      cursor: pointer;
      color: white;
      font-weight: bold;
      margin: 5px;
      transition: transform 0.2s ease;
    }

    .export-btn:hover {
      transform: scale(1.05);
    }

    table {
      width: 100%;
      border-collapse: collapse;
      border-radius: 12px;
      overflow: hidden;
    }

    th, td {
      text-align: left;
      padding: 12px;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }

    th {
      background: rgba(255, 255, 255, 0.1);
      text-transform: uppercase;
      font-weight: 600;
    }

    .status {
      padding: 6px 12px;
      border-radius: 12px;
      font-weight: bold;
      font-size: 0.85rem;
      display: inline-block;
    }

    .Applied { background: linear-gradient(45deg, #3b82f6, #60a5fa); }
    .Interview { background: linear-gradient(45deg, #f59e0b, #fbbf24); }
    .Hired { background: linear-gradient(45deg, #10b981, #34d399); }
    .Rejected { background: linear-gradient(45deg, #ef4444, #f87171); }

    .status-dropdown {
      background: rgba(255, 255, 255, 0.1);
      color: white;
      border: none;
      padding: 5px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.9rem;
    }

    footer {
      text-align: center;
      padding: 10px;
      margin-top: 40px;
      font-size: 0.8rem;
      color: #888;
    }
  </style>
</head>
<body>
  <header>
    Aasritha Solutions – ATS Tracking Dashboard
  </header>

  <div id="root"></div>

  <footer>
    &copy; 2025 Aasritha Solutions | ATS Tracker
  </footer>

  <script type="text/babel">
    const { useState, useEffect } = React;

    function StatusBadge({ status }) {
      return <span className={`status ${status}`}>{status}</span>;
    }

    function App() {
      const defaultApplicants = [
        { id: 1, name: "Alice Johnson", position: "Frontend Developer", status: "Applied" },
        { id: 2, name: "Bob Smith", position: "Backend Developer", status: "Interview" },
        { id: 3, name: "Charlie Brown", position: "DevOps Engineer", status: "Hired" },
        { id: 4, name: "Diana Prince", position: "Product Manager", status: "Rejected" },
        { id: 5, name: "Ethan Hunt", position: "QA Tester", status: "Interview" },
      ];

      const [applicants, setApplicants] = useState(() => {
        const saved = localStorage.getItem("applicants");
        return saved ? JSON.parse(saved) : defaultApplicants;
      });

      const [search, setSearch] = useState("");
      const [filterStatus, setFilterStatus] = useState("");

      useEffect(() => {
        localStorage.setItem("applicants", JSON.stringify(applicants));
      }, [applicants]);

      const handleUpload = (e) => {
        const file = e.target.files[0];
        if (file && file.name.endsWith(".pdf")) {
          const name = file.name.replace(".pdf", "").replace(/_/g, " ");
          setApplicants(prev => [
            ...prev,
            { id: prev.length + 1, name: name, position: "New Applicant", status: "Applied" }
          ]);
        } else {
          alert("Please upload a valid PDF file.");
        }
      };

      const handleStatusChange = (id, newStatus) => {
        setApplicants(prev =>
          prev.map(applicant =>
            applicant.id === id ? { ...applicant, status: newStatus } : applicant
          )
        );
      };

      const downloadCSV = () => {
        const csvRows = [
          ["ID", "Name", "Position", "Status"],
          ...applicants.map(app => [app.id, `"${app.name}"`, `"${app.position}"`, app.status])
        ];
        const csvContent = "data:text/csv;charset=utf-8," + csvRows.map(e => e.join(",")).join("\n");
        const link = document.createElement("a");
        link.setAttribute("href", encodeURI(csvContent));
        link.setAttribute("download", "applicants.csv");
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
      };

      const filtered = applicants.filter(applicant => {
        const matchSearch = applicant.name.toLowerCase().includes(search.toLowerCase()) ||
                            applicant.position.toLowerCase().includes(search.toLowerCase());
        const matchStatus = filterStatus ? applicant.status === filterStatus : true;
        return matchSearch && matchStatus;
      });

      return (
        <div className="container">
          {/* Resume Upload */}
          <div className="upload-section">
            <h3>Upload Resume (PDF)</h3>
            <input type="file" accept=".pdf" className="upload-input" onChange={handleUpload} />
          </div>

          {/* Search + Filters + Export */}
          <div className="filters">
            <input
              type="text"
              placeholder="Search by name or position..."
              value={search}
              onChange={(e) => setSearch(e.target.value)}
            />
            <select value={filterStatus} onChange={(e) => setFilterStatus(e.target.value)}>
              <option value="">Filter by Status</option>
              <option value="Applied">Applied</option>
              <option value="Interview">Interview</option>
              <option value="Hired">Hired</option>
              <option value="Rejected">Rejected</option>
            </select>
            <button className="export-btn" onClick={downloadCSV}>⬇ Export CSV</button>
          </div>

          {/* Applicant Table */}
          <table>
            <thead>
              <tr>
                <th>Candidate</th>
                <th>Position</th>
                <th>Status</th>
                <th>Update</th>
              </tr>
            </thead>
            <tbody>
              {filtered.length === 0 ? (
                <tr>
                  <td colSpan="4" style={{ textAlign: "center", color: "#bbb" }}>
                    No applicants found.
                  </td>
                </tr>
              ) : (
                filtered.map(applicant => (
                  <tr key={applicant.id}>
                    <td>{applicant.name}</td>
                    <td>{applicant.position}</td>
                    <td><StatusBadge status={applicant.status} /></td>
                    <td>
                      <select
                        className="status-dropdown"
                        value={applicant.status}
                        onChange={(e) => handleStatusChange(applicant.id, e.target.value)}
                      >
                        <option value="Applied">Applied</option>
                        <option value="Interview">Interview</option>
                        <option value="Hired">Hired</option>
                        <option value="Rejected">Rejected</option>
                      </select>
                    </td>
                  </tr>
                ))
              )}
            </tbody>
          </table>
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>
